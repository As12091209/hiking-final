<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å°éœ¸å¹³å®‰å›å ±</title>
    <style>
        body { background-color: #121212; color: #ffffff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding: 20px; text-align: center; }
        .card { background: #1e1e1e; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #333; }
        button { width: 100%; padding: 15px; margin: 5px 0; font-size: 1.1rem; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .btn-update { background-color: #2196F3; color: white; }
        .btn-status { background-color: #333; color: #eee; border: 1px solid #555; }
        .btn-status:active { background-color: #4CAF50; color: black; }
        textarea { width: 100%; height: 100px; background: #2d2d2d; color: #fff; border: 1px solid #555; border-radius: 8px; padding: 10px; font-size: 1rem; }
        #gpsDisplay { font-family: monospace; margin-top: 10px; color: #aaa; }
    </style>
</head>
<body>
    <h1>â›°ï¸ å¤§å°éœ¸å›å ±å™¨ (æ­£å¼ç‰ˆ)</h1>
    
    <div class="card">
        <button class="btn-update" onclick="getGPS()">ğŸ“ 1. æ›´æ–°ä½ç½®</button>
        <div id="gpsDisplay">ç­‰å¾…å®šä½...</div>
    </div>

    <div class="card">
        <p>2. é¸æ“‡ç‹€æ…‹ï¼š</p>
        <button class="btn-status" onclick="genMsg('âœ… æŠµé” / å¹³å®‰')">âœ… æŠµé” / å¹³å®‰</button>
        <button class="btn-status" onclick="genMsg('ğŸš€ å‡ºç™¼ / çºŒè¡Œ')">ğŸš€ å‡ºç™¼ / çºŒè¡Œ</button>
        <button class="btn-status" onclick="genMsg('ğŸ›‘ æ’¤é€€ / ç´®ç‡Ÿ')">ğŸ›‘ æ’¤é€€ / ç´®ç‡Ÿ</button>
    </div>

    <div class="card">
        <textarea id="msgArea" onclick="this.select()" readonly placeholder="è¨Šæ¯å°‡é¡¯ç¤ºæ–¼æ­¤..."></textarea>
    </div>

    <script>
        let lat = null;
        let lon = null;
        
        function getGPS() {
            const display = document.getElementById('gpsDisplay');
            display.innerText = "è¡›æ˜Ÿå®šä½ä¸­...";
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        // æˆåŠŸå–å¾—åº§æ¨™
                        lat = pos.coords.latitude.toFixed(5);
                        lon = pos.coords.longitude.toFixed(5);
                        display.innerHTML = `ç·¯åº¦: ${lat} <br> ç¶“åº¦: ${lon}`;
                        display.style.color = "#4CAF50"; // å®šä½æˆåŠŸè®Šç¶ è‰²
                    }, 
                    (err) => {
                        // å®šä½å¤±æ•—è™•ç†
                        display.innerText = "å®šä½å¤±æ•—: " + err.message;
                        display.style.color = "#F44336"; // å¤±æ•—è®Šç´…è‰²
                    }, 
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                );
            } else {
                alert("æ‚¨çš„è£ç½®ä¸æ”¯æ´ GPS");
            }
        }

        function genMsg(status) {
            if (!lat || !lon) { 
                alert("âš ï¸ è«‹å…ˆé»æ“Šä¸Šæ–¹è—è‰²æŒ‰éˆ•å®Œæˆå®šä½ï¼"); 
                return; 
            }
            
            // å–å¾—ç›®å‰æ™‚é–“
            let time = new Date().toLocaleString('zh-TW', {
                hour12: false, month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit'
            });
            
            // âœ… Code Review é‡é»ï¼š
            // 1. ä½¿ç”¨åå¼•è™Ÿ ` åŒ…è¦†å­—ä¸²ï¼Œç¢ºä¿è®Šæ•¸èƒ½é‹ä½œ
            // 2. ä½¿ç”¨æ¨™æº– Google Maps æœå°‹åƒæ•¸ (?q=ç·¯åº¦,ç¶“åº¦)
            // 3. è®Šæ•¸ä½¿ç”¨ ${lat} å’Œ ${lon}
            let mapLink = `https://www.google.com/maps?q=${lat},${lon}`;
            
            let msg = `ã€${status}ã€‘\næ™‚é–“ï¼š${time}\nä½ç½®ï¼š${lat}, ${lon}\nåœ°åœ–ï¼š${mapLink}`;
            
            let area = document.getElementById('msgArea');
            area.value = msg;
            area.select();
            
            // å˜—è©¦è¤‡è£½åˆ°å‰ªè²¼ç°¿
            try {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(msg);
                } else {
                    document.execCommand("copy");
                }
                alert("âœ… è¨Šæ¯å·²è¤‡è£½ï¼");
            } catch (err) {
                alert("å·²ç”Ÿæˆè¨Šæ¯ï¼Œè«‹æ‰‹å‹•è¤‡è£½");
            }
        }
    </script>
</body>
</html>
